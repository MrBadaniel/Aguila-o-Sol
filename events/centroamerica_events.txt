namespace = centroamerica

# Purificador/Reconstructionist wins siege over a Christian temple
character_event = {
    id = emf_heresy.2016
    desc = EVTDESC_emf_heresy_2016
    picture = GFX_evt_siege
    border = GFX_event_normal_frame_war

    is_triggered_only = yes

    religion_group = christian

    trigger = {
        OR = {
            religion = purificador
            religion = reconstructionist
        }
        FROM = {
            holding_type = temple
            owner = {
                wealth = 50
				OR = {
				religion_group = christian
				religion_group = cult_of_saints
				religion_group = latter_day_saints
				religion_group = amero_syncretic
				religion = qabantajik
				religion = rastafarian
				}
                NOR = {
                    religion = purificador
                    religion = reconstructionist
                }
            }
        }
    }
option = {
        name = EVTOPTA_emf_heresy_2016
        ai_chance = {
            factor = 0.5
            modifier = {
                factor = 2
                religion = purificador
            }
            modifier = {
                factor = 5
                trait = zealous
            }
            modifier = {
                factor = 1.5
                trait = greedy
            }
            modifier = {
                factor = 1.5
                trait = wroth
            }
        }
        if = {
            limit = {
                NOT = { trait = iconoclast_trait }
                OR = {
                    religion = purificador
                    religion = reconstructionist
                }
            }
            add_trait = iconoclast_trait
        }
        wealth = 50
        piety = -25
        hidden_tooltip = {
            FROM = {
                owner = {
                    wealth = -50
                    opinion = { who = ROOT modifier = opinion_outraged years = 20 }
                }
            }
        }
    }
option = {
        name = EVTOPTB_emf_heresy_2016
        ai_chance = {
            factor = 50
            modifier = {
                factor = 0
                trait = iconoclast_trait
            }
            modifier = {
                factor = 0
                NOT = { piety = 0 }
            }
            modifier = {
                factor = 2
                trait = cynical
            }
            modifier = {
                factor = 1.5
                trait = kind
            }
            modifier = {
                factor = 1.5
                trait = humble
            }
        }
        piety = 10
    }
}

##flagellation Events##
character_event = {
	id = centroamerica.100
	desc = EVTDESC_flagellation_1
	picture = GFX_evt_xipe #placeholder
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	trigger = {
		has_character_flag = flagellation_ritual
	}
	
	option = { #flagellation lvl 1 
		name = EVTOPTA_flagellation_1
		trigger = { is_female = no }
		custom_tooltip = { text = TXT_EVTOPTA_flagellation_1 }
		hidden_tooltip = {
			character_event = { id = centroamerica.103 days = 2 }
		}
	}
	
	option = { #flagellation lvl 2
		name = EVTOPTB_flagellation_1
		custom_tooltip = { text = TXT_EVTOPTB_flagellation_1 }
		hidden_tooltip = {
			character_event = { id = centroamerica.102 days = 2 }
		}
	}
	
	option = { #flagellation lvl 3
		name = EVTOPTC_flagellation_1
		custom_tooltip = { text = TXT_EVTOPTC_flagellation_1 }
		hidden_tooltip = { #event used to decide outcome
			character_event = { id = centroamerica.101 days = 2 }
		}
	}
}

character_event = { #Tongue event decider
	id = centroamerica.101
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_character_flag = flagellation_ritual
	}
	
	immediate = {
		random_list = {
			70 = { #Goes well - immense piety and prestige
				modifier = {
					factor = 1.5
					OR = {
						trait = quick
						trait = genius
						trait = shrewd
						trait = physician
					}
				}
				modifier = {
					factor = 0.75
					OR = {
						trait = dull
						trait = slow
						trait = distractible
						trait = imbecile
						trait = inbred
					}
				}
				character_event = { id = centroamerica.104 days = 1}
			}
			25 = { #Goes poorly - infection
				modifier = {
					factor = 0.75
					OR = {
						trait = quick
						trait = genius
						trait = shrewd
						trait = physician
					}
				}
				modifier = {
					factor = 1.5
					OR = {
						trait = dull
						trait = slow
						trait = distractible
						trait = imbecile
						trait = inbred
					}
				}
				character_event = { id = centroamerica.105 days = 1}
			}
			5 = { #Goes very poorly - permanent lisp
				modifier = {
					factor = 0.5
					OR = {
						trait = quick
						trait = genius
						trait = shrewd
						trait = physician
					}
				}
				modifier = {
					factor = 1.75
					OR = {
						trait = dull
						trait = slow
						trait = distractible
						trait = imbecile
						trait = inbred
					}
				}
				character_event = { id = centroamerica.106 days = 1}
			}
		}
	}
}

character_event = { #Arm event decider
	id = centroamerica.102
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_character_flag = flagellation_ritual
	}
	
	immediate = {
		random_list = {
			75 = { #Goes well - pretty good piety and prestige
				modifier = {
					factor = 1.5
					OR = {
						trait = quick
						trait = genius
						trait = shrewd
						trait = physician
					}
				}
				modifier = {
					factor = 0.75
					OR = {
						trait = dull
						trait = slow
						trait = distractible
						trait = imbecile
						trait = inbred
					}
				}
				character_event = { id = centroamerica.107 days = 1}
			}
			25 = { #Goes poorly - infection
				modifier = {
					factor = 0.75
					OR = {
						trait = quick
						trait = genius
						trait = shrewd
						trait = physician
					}
				}
				modifier = {
					factor = 1.5
					OR = {
						trait = dull
						trait = slow
						trait = distractible
						trait = imbecile
						trait = inbred
					}
				}
				character_event = { id = centroamerica.108 days = 1}
			}
		}
	}
}

character_event = { #Hand event decider
	id = centroamerica.103
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_character_flag = flagellation_ritual
	}
	
	immediate = {
		random_list = {
			80 = { #Goes well - alright piety and prestige
				modifier = {
					factor = 1.5
					OR = {
						trait = quick
						trait = genius
						trait = shrewd
						trait = physician
					}
				}
				modifier = {
					factor = 0.75
					OR = {
						trait = dull
						trait = slow
						trait = distractible
						trait = imbecile
						trait = inbred
					}
				}
				character_event = { id = centroamerica.109 days = 1}
			}
			20 = { #Goes poorly - infection
				modifier = {
					factor = 0.75
					OR = {
						trait = quick
						trait = genius
						trait = shrewd
						trait = physician
					}
				}
				modifier = {
					factor = 1.5
					OR = {
						trait = dull
						trait = slow
						trait = distractible
						trait = imbecile
						trait = inbred
					}
				}
				character_event = { id = centroamerica.110 days = 1}
			}
		}
	}
}

#Tongue event (good)
character_event = {
	id = centroamerica.104
	desc = EVTDESC_flagellation_2
	picture = GFX_evt_xipe
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	trigger = {
		has_character_flag = flagellation_ritual
	}
	
	option = {
		name = EVTOPTA_flagellation_2
		prestige = 350
		piety = 350
		#add_trait = bloodlet #this will help solidify it in the minds of players
		add_character_modifier = { 
			name = flagellant_tier_three
			duration = 60
		}
	}
	
	after = {
		clr_character_flag = flagellation_ritual
	}
}

#Tongue event (bad)
character_event = {
	id = centroamerica.105
	desc = EVTDESC_flagellation_3
	picture = GFX_evt_bad_news
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	trigger = {
		has_character_flag = flagellation_ritual
	}
	
	option = {
		name = EVTOPTA_flagellation_3
		prestige = -50
		piety = 200
		if = {
			limit = {
				NOT = {
					has_dlc = "Reapers"
				}
			}
			add_trait = wounded
		}
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			add_trait = infection
			hidden_tooltip = {
				character_event = { id = RIP.11001 days = 365 random = 1095 }
			}
		}
		#add_trait = bloodlet #this will help solidify it in the minds of players
		add_character_modifier = { 
			name = flagellant_tier_three
			duration = 60
		}
		
	}
	
	after = {
		clr_character_flag = flagellation_ritual
	}
}

#Tongue event (very bad)
character_event = {
	id = centroamerica.106
	desc = EVTDESC_flagellation_4
	picture = GFX_evt_bad_news
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	trigger = {
		has_character_flag = flagellation_ritual
	}
	
	option = {
		name = EVTOPTA_flagellation_4
		prestige = -150
		piety = 50
		add_trait = lisp
		#add_trait = bloodlet #this will help solidify it in the minds of players
		add_character_modifier = { 
			name = flagellant_tier_three
			duration = 60
		}
	}
	
	after = {
		clr_character_flag = flagellation_ritual
	}
}

#Arm event (good)
character_event = {
	id = centroamerica.107
	desc = EVTDESC_flagellation_5
	picture = GFX_evt_xipe
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	trigger = {
		has_character_flag = flagellation_ritual
	}
	
	option = {
		name = EVTOPTA_flagellation_5
		prestige = 250
		piety = 250
		#add_trait = bloodlet #this will help solidify it in the minds of players
		add_character_modifier = { 
			name = flagellant_tier_two
			duration = 60
		}
	}
	
	after = {
		clr_character_flag = flagellation_ritual
	}
}

#Arm event (bad)
character_event = {
	id = centroamerica.108
	desc = EVTDESC_flagellation_6
	picture = GFX_evt_bad_news
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	trigger = {
		has_character_flag = flagellation_ritual
	}
	
	option = {
		name = EVTOPTA_flagellation_6
		prestige = -75
		piety = 100
		if = {
			limit = {
				NOT = {
					has_dlc = "Reapers"
				}
			}
			add_trait = wounded
		}
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			add_trait = infection
			hidden_tooltip = {
				character_event = { id = RIP.11001 days = 365 random = 1095 }
			}
		}
		#add_trait = bloodlet #this will help solidify it in the minds of players
		add_character_modifier = { 
			name = flagellant_tier_two
			duration = 60
		}
	}
	
	after = {
		clr_character_flag = flagellation_ritual
	}
}

#Hand event (good)
character_event = {
	id = centroamerica.109
	desc = EVTDESC_flagellation_7
	picture = GFX_evt_xipe
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	trigger = {
		has_character_flag = flagellation_ritual
	}
	
	option = {
		name = EVTOPTA_flagellation_7
		prestige = 200
		piety = 200
		#add_trait = bloodlet #this will help solidify it in the minds of players
		add_character_modifier = { 
			name = flagellant_tier_one
			duration = 60
		}
	}
	
	after = {
		clr_character_flag = flagellation_ritual
	}
}

#Hand event (bad)
character_event = {
	id = centroamerica.110
	desc = EVTDESC_flagellation_8
	picture = GFX_evt_bad_news
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	trigger = {
		has_character_flag = flagellation_ritual
	}
	
	option = {
		name = EVTOPTA_flagellation_8
		prestige = -100
		piety = 50
		if = {
			limit = {
				NOT = {
					has_dlc = "Reapers"
				}
			}
			add_trait = wounded
		}
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			add_trait = infection
			hidden_tooltip = {
				character_event = { id = RIP.11001 days = 365 random = 1095 }
			}
		}
		#add_trait = bloodlet #this will help solidify it in the minds of players
		add_character_modifier = { 
			name = flagellant_tier_one
			duration = 60
		}
	}
	
	after = {
		clr_character_flag = flagellation_ritual
	}
}